const data = {"ParsedResults":[{"TextOverlay":{"Lines":[{"LineText":"female circumcision. The 2005","Words":[{"WordText":"female","Left":180,"Top":258,"Height":11,"Width":50},{"WordText":"circumcision.","Left":233,"Top":258,"Height":11,"Width":92},{"WordText":"The","Left":329,"Top":258,"Height":11,"Width":28},{"WordText":"2005","Left":359,"Top":259,"Height":10,"Width":35}],"MaxHeight":11,"MinTop":258},{"LineText":"Demographic and Health Survey reported","Words":[{"WordText":"Demographic","Left":180,"Top":276,"Height":15,"Width":95},{"WordText":"and","Left":278,"Top":277,"Height":11,"Width":28},{"WordText":"Health","Left":309,"Top":277,"Height":11,"Width":47},{"WordText":"Survey","Left":360,"Top":278,"Height":13,"Width":45},{"WordText":"reported","Left":407,"Top":277,"Height":14,"Width":60}],"MaxHeight":15,"MinTop":276},{"LineText":"that 96% of women have gone through the","Words":[{"WordText":"that","Left":180,"Top":296,"Height":11,"Width":28},{"WordText":"96%","Left":211,"Top":297,"Height":10,"Width":30},{"WordText":"of","Left":246,"Top":296,"Height":11,"Width":15},{"WordText":"women","Left":263,"Top":299,"Height":8,"Width":52},{"WordText":"have","Left":318,"Top":296,"Height":11,"Width":34},{"WordText":"gone","Left":355,"Top":298,"Height":12,"Width":36},{"WordText":"through","Left":394,"Top":296,"Height":14,"Width":60},{"WordText":"the","Left":457,"Top":296,"Height":11,"Width":21}],"MaxHeight":14,"MinTop":296},{"LineText":"operation. The agriculture sector at some","Words":[{"WordText":"operation.","Left":180,"Top":314,"Height":15,"Width":72},{"WordText":"The","Left":255,"Top":315,"Height":11,"Width":29},{"WordText":"agriculture","Left":288,"Top":314,"Height":15,"Width":83},{"WordText":"sector","Left":376,"Top":316,"Height":10,"Width":43},{"WordText":"at","Left":422,"Top":316,"Height":10,"Width":15},{"WordText":"some","Left":439,"Top":318,"Height":8,"Width":39}],"MaxHeight":15,"MinTop":314},{"LineText":"point employed approximately 75% ofthe","Words":[{"WordText":"point","Left":180,"Top":333,"Height":15,"Width":37},{"WordText":"employed","Left":220,"Top":334,"Height":14,"Width":70},{"WordText":"approximately","Left":293,"Top":333,"Height":15,"Width":103},{"WordText":"75%","Left":400,"Top":335,"Height":10,"Width":30},{"WordText":"ofthe","Left":435,"Top":334,"Height":14,"Width":36}],"MaxHeight":15,"MinTop":333},{"LineText":"country. The rice is cultivated in the","Words":[{"WordText":"country.","Left":180,"Top":354,"Height":13,"Width":57},{"WordText":"The","Left":241,"Top":353,"Height":11,"Width":28},{"WordText":"rice","Left":272,"Top":352,"Height":12,"Width":29},{"WordText":"is","Left":304,"Top":353,"Height":11,"Width":11},{"WordText":"cultivated","Left":318,"Top":353,"Height":11,"Width":70},{"WordText":"in","Left":391,"Top":352,"Height":12,"Width":14},{"WordText":"the","Left":409,"Top":353,"Height":11,"Width":22}],"MaxHeight":13,"MinTop":352},{"LineText":"flooded zones between streams and rivers.","Words":[{"WordText":"flooded","Left":180,"Top":372,"Height":11,"Width":53},{"WordText":"zones","Left":236,"Top":375,"Height":8,"Width":39},{"WordText":"between","Left":277,"Top":372,"Height":11,"Width":57},{"WordText":"streams","Left":338,"Top":373,"Height":10,"Width":56},{"WordText":"and","Left":398,"Top":372,"Height":11,"Width":26},{"WordText":"rivers.","Left":428,"Top":371,"Height":12,"Width":44}],"MaxHeight":12,"MinTop":371},{"LineText":"The local production ofrice is not sufficient","Words":[{"WordText":"The","Left":180,"Top":391,"Height":12,"Width":27},{"WordText":"local","Left":210,"Top":391,"Height":11,"Width":34},{"WordText":"production","Left":246,"Top":390,"Height":15,"Width":79},{"WordText":"ofrice","Left":328,"Top":390,"Height":15,"Width":42},{"WordText":"is","Left":374,"Top":390,"Height":12,"Width":12},{"WordText":"not","Left":389,"Top":392,"Height":10,"Width":24},{"WordText":"sufficient","Left":416,"Top":390,"Height":15,"Width":60}],"MaxHeight":15,"MinTop":390},{"LineText":"to feed the country, so rice is imported","Words":[{"WordText":"to","Left":180,"Top":411,"Height":10,"Width":13},{"WordText":"feed","Left":196,"Top":410,"Height":11,"Width":31},{"WordText":"the","Left":230,"Top":410,"Height":11,"Width":22},{"WordText":"country,","Left":256,"Top":411,"Height":13,"Width":58},{"WordText":"so","Left":317,"Top":413,"Height":8,"Width":16},{"WordText":"rice","Left":336,"Top":413,"Height":8,"Width":27},{"WordText":"is","Left":366,"Top":410,"Height":11,"Width":12},{"WordText":"imported","Left":381,"Top":409,"Height":15,"Width":67}],"MaxHeight":15,"MinTop":409},{"LineText":"from Asia. The sector cultivates coffee beans,","Words":[{"WordText":"from","Left":177,"Top":429,"Height":14,"Width":34},{"WordText":"Asia.","Left":214,"Top":428,"Height":12,"Width":34},{"WordText":"The","Left":252,"Top":429,"Height":11,"Width":28},{"WordText":"sector","Left":282,"Top":430,"Height":10,"Width":43},{"WordText":"cultivates","Left":327,"Top":428,"Height":12,"Width":68},{"WordText":"coffee","Left":399,"Top":429,"Height":14,"Width":36},{"WordText":"beans,","Left":438,"Top":429,"Height":13,"Width":39}],"MaxHeight":14,"MinTop":428},{"LineText":"pineapples,peaches, nectarines, mangoes,","Words":[{"WordText":"pineapples,peaches,","Left":180,"Top":447,"Height":15,"Width":141},{"WordText":"nectarines,","Left":326,"Top":448,"Height":13,"Width":76},{"WordText":"mangoes,","Left":405,"Top":450,"Height":12,"Width":67}],"MaxHeight":15,"MinTop":447},{"LineText":"oranges, bananas, potatoes, tomatoes,","Words":[{"WordText":"oranges,","Left":180,"Top":469,"Height":12,"Width":63},{"WordText":"bananas,","Left":246,"Top":467,"Height":13,"Width":63},{"WordText":"potatoes,","Left":313,"Top":468,"Height":13,"Width":68},{"WordText":"tomatoes,","Left":384,"Top":468,"Height":12,"Width":69}],"MaxHeight":13,"MinTop":467},{"LineText":"cucumbers, pepper, and other types of","Words":[{"WordText":"cucumbers,","Left":180,"Top":486,"Height":13,"Width":87},{"WordText":"pepper,","Left":270,"Top":489,"Height":11,"Width":53},{"WordText":"and","Left":327,"Top":486,"Height":11,"Width":26},{"WordText":"other","Left":357,"Top":486,"Height":11,"Width":39},{"WordText":"types","Left":398,"Top":487,"Height":13,"Width":38},{"WordText":"of","Left":440,"Top":486,"Height":11,"Width":16}],"MaxHeight":13,"MinTop":486},{"LineText":"produce. Gumea i s one ofthe emerging","Words":[{"WordText":"produce.","Left":178,"Top":505,"Height":14,"Width":61},{"WordText":"Gumea","Left":242,"Top":506,"Height":10,"Width":51},{"WordText":"i","Left":296,"Top":504,"Height":12,"Width":4},{"WordText":"s","Left":302,"Top":508,"Height":8,"Width":6},{"WordText":"one","Left":312,"Top":508,"Height":8,"Width":27},{"WordText":"ofthe","Left":342,"Top":505,"Height":14,"Width":38},{"WordText":"emerging","Left":383,"Top":505,"Height":14,"Width":66}],"MaxHeight":14,"MinTop":504},{"LineText":"regional producers ofapples and pears.","Words":[{"WordText":"regional","Left":180,"Top":523,"Height":15,"Width":58},{"WordText":"producers","Left":241,"Top":524,"Height":14,"Width":76},{"WordText":"ofapples","Left":321,"Top":524,"Height":14,"Width":63},{"WordText":"and","Left":388,"Top":524,"Height":11,"Width":28},{"WordText":"pears.","Left":419,"Top":527,"Height":11,"Width":43}],"MaxHeight":15,"MinTop":523},{"LineText":"There are plantations of grapes,","Words":[{"WordText":"There","Left":180,"Top":543,"Height":11,"Width":42},{"WordText":"are","Left":225,"Top":546,"Height":8,"Width":22},{"WordText":"plantations","Left":251,"Top":542,"Height":15,"Width":84},{"WordText":"of","Left":338,"Top":543,"Height":11,"Width":16},{"WordText":"grapes,","Left":356,"Top":545,"Height":12,"Width":51}],"MaxHeight":15,"MinTop":542},{"LineText":"pomegranates, and more recent years have","Words":[{"WordText":"pomegranates,","Left":180,"Top":563,"Height":13,"Width":104},{"WordText":"and","Left":289,"Top":562,"Height":11,"Width":26},{"WordText":"more","Left":318,"Top":565,"Height":8,"Width":38},{"WordText":"recent","Left":359,"Top":563,"Height":10,"Width":41},{"WordText":"years","Left":402,"Top":565,"Height":11,"Width":38},{"WordText":"have","Left":444,"Top":562,"Height":11,"Width":34}],"MaxHeight":13,"MinTop":562},{"LineText":"seen the development of strawberry","Words":[{"WordText":"seen","Left":181,"Top":584,"Height":8,"Width":31},{"WordText":"the","Left":216,"Top":581,"Height":11,"Width":21},{"WordText":"development","Left":241,"Top":581,"Height":14,"Width":93},{"WordText":"of","Left":337,"Top":581,"Height":11,"Width":15},{"WordText":"strawberry","Left":354,"Top":581,"Height":14,"Width":79}],"MaxHeight":14,"MinTop":581},{"LineText":"plantations, based on the vertical","Words":[{"WordText":"plantations,","Left":179,"Top":599,"Height":15,"Width":76},{"WordText":"based","Left":259,"Top":600,"Height":11,"Width":42},{"WordText":"on","Left":305,"Top":603,"Height":8,"Width":19},{"WordText":"the","Left":327,"Top":600,"Height":11,"Width":23},{"WordText":"vertical","Left":353,"Top":599,"Height":12,"Width":53}],"MaxHeight":15,"MinTop":599},{"LineText":"hydroponic system. Guinea has 25% or","Words":[{"WordText":"hydroponic","Left":180,"Top":618,"Height":15,"Width":80},{"WordText":"system.","Left":265,"Top":620,"Height":13,"Width":53},{"WordText":"Guinea","Left":321,"Top":619,"Height":11,"Width":50},{"WordText":"has","Left":374,"Top":619,"Height":11,"Width":25},{"WordText":"25%","Left":403,"Top":620,"Height":10,"Width":29},{"WordText":"or","Left":435,"Top":622,"Height":8,"Width":16}],"MaxHeight":15,"MinTop":618},{"LineText":"influence in Tonga, financing","Words":[{"WordText":"influence","Left":181,"Top":800,"Height":10,"Width":53},{"WordText":"in","Left":236,"Top":800,"Height":10,"Width":11},{"WordText":"Tonga,","Left":250,"Top":801,"Height":12,"Width":38},{"WordText":"financing","Left":292,"Top":800,"Height":13,"Width":53}],"MaxHeight":13,"MinTop":800},{"LineText":"infrastructure pro]ects includinga","Words":[{"WordText":"infrastructure","Left":182,"Top":816,"Height":10,"Width":77},{"WordText":"pro]ects","Left":263,"Top":817,"Height":12,"Width":45},{"WordText":"includinga","Left":313,"Top":816,"Height":13,"Width":62}],"MaxHeight":13,"MinTop":816},{"LineText":"new royal palace, and holding two","Words":[{"WordText":"new","Left":182,"Top":835,"Height":7,"Width":23},{"WordText":"royal","Left":208,"Top":832,"Height":13,"Width":27},{"WordText":"palace,","Left":239,"Top":832,"Height":13,"Width":40},{"WordText":"and","Left":284,"Top":832,"Height":10,"Width":20},{"WordText":"holding","Left":308,"Top":832,"Height":13,"Width":42},{"WordText":"two","Left":353,"Top":833,"Height":9,"Width":21}],"MaxHeight":13,"MinTop":832},{"LineText":"thirds of the countryS foreign","Words":[{"WordText":"thirds","Left":181,"Top":848,"Height":10,"Width":32},{"WordText":"of","Left":216,"Top":848,"Height":10,"Width":13},{"WordText":"the","Left":232,"Top":848,"Height":10,"Width":19},{"WordText":"countryS","Left":253,"Top":848,"Height":13,"Width":51},{"WordText":"foreign","Left":308,"Top":848,"Height":13,"Width":41}],"MaxHeight":13,"MinTop":848},{"LineText":"debt.Tonga retains cordial","Words":[{"WordText":"debt.Tonga","Left":181,"Top":864,"Height":13,"Width":66},{"WordText":"retains","Left":250,"Top":865,"Height":9,"Width":38},{"WordText":"cordial","Left":292,"Top":864,"Height":10,"Width":40}],"MaxHeight":13,"MinTop":864},{"LineText":"relations with the united States.","Words":[{"WordText":"relations","Left":181,"Top":880,"Height":10,"Width":51},{"WordText":"with","Left":235,"Top":880,"Height":10,"Width":24},{"WordText":"the","Left":262,"Top":880,"Height":10,"Width":18},{"WordText":"united","Left":284,"Top":880,"Height":10,"Width":36},{"WordText":"States.","Left":325,"Top":881,"Height":9,"Width":39}],"MaxHeight":10,"MinTop":880},{"LineText":"Although remains on good","Words":[{"WordText":"Although","Left":181,"Top":896,"Height":13,"Width":52},{"WordText":"remains","Left":246,"Top":896,"Height":10,"Width":46},{"WordText":"on","Left":296,"Top":899,"Height":7,"Width":15},{"WordText":"good","Left":314,"Top":896,"Height":13,"Width":29}],"MaxHeight":13,"MinTop":896},{"LineText":"terms with the united Kingdom,","Words":[{"WordText":"terms","Left":181,"Top":913,"Height":9,"Width":33},{"WordText":"with","Left":217,"Top":912,"Height":10,"Width":24},{"WordText":"the","Left":245,"Top":912,"Height":10,"Width":19},{"WordText":"united","Left":267,"Top":912,"Height":10,"Width":36},{"WordText":"Kingdom,","Left":308,"Top":912,"Height":13,"Width":53}],"MaxHeight":13,"MinTop":912},{"LineText":"the two countries do not maintain","Words":[{"WordText":"the","Left":181,"Top":928,"Height":10,"Width":18},{"WordText":"two","Left":202,"Top":929,"Height":9,"Width":21},{"WordText":"countries","Left":226,"Top":928,"Height":10,"Width":54},{"WordText":"do","Left":284,"Top":928,"Height":10,"Width":15},{"WordText":"not","Left":302,"Top":929,"Height":9,"Width":20},{"WordText":"maintain","Left":324,"Top":928,"Height":10,"Width":50}],"MaxHeight":10,"MinTop":928},{"LineText":"particularly close relations, and","Words":[{"WordText":"particularly","Left":182,"Top":944,"Height":13,"Width":63},{"WordText":"close","Left":248,"Top":944,"Height":10,"Width":31},{"WordText":"relations,","Left":283,"Top":944,"Height":12,"Width":51},{"WordText":"and","Left":338,"Top":944,"Height":10,"Width":22}],"MaxHeight":13,"MinTop":944},{"LineText":"the United Kingdom closed its","Words":[{"WordText":"the","Left":181,"Top":960,"Height":10,"Width":18},{"WordText":"United","Left":203,"Top":960,"Height":10,"Width":37},{"WordText":"Kingdom","Left":244,"Top":960,"Height":13,"Width":51},{"WordText":"closed","Left":298,"Top":960,"Height":10,"Width":38},{"WordText":"its","Left":341,"Top":961,"Height":9,"Width":14}],"MaxHeight":13,"MinTop":960},{"LineText":"High Commission in Tonga in","Words":[{"WordText":"High","Left":181,"Top":976,"Height":13,"Width":27},{"WordText":"Commission","Left":211,"Top":977,"Height":9,"Width":72},{"WordText":"in","Left":287,"Top":977,"Height":9,"Width":9},{"WordText":"Tonga","Left":300,"Top":977,"Height":12,"Width":36},{"WordText":"in","Left":340,"Top":977,"Height":9,"Width":9}],"MaxHeight":13,"MinTop":976},{"LineText":"2006, although the UK High","Words":[{"WordText":"2006,","Left":181,"Top":993,"Height":11,"Width":33},{"WordText":"although","Left":216,"Top":992,"Height":13,"Width":50},{"WordText":"the","Left":269,"Top":992,"Height":10,"Width":19},{"WordText":"UK","Left":292,"Top":993,"Height":9,"Width":16},{"WordText":"High","Left":311,"Top":992,"Height":13,"Width":26}],"MaxHeight":13,"MinTop":992},{"LineText":"Commission was re-established","Words":[{"WordText":"Commission","Left":181,"Top":1008,"Height":10,"Width":73},{"WordText":"was","Left":257,"Top":1011,"Height":7,"Width":23},{"WordText":"re-established","Left":285,"Top":1008,"Height":10,"Width":80}],"MaxHeight":10,"MinTop":1008},{"LineText":"in January 2020 after a 14-year","Words":[{"WordText":"in","Left":182,"Top":1025,"Height":9,"Width":9},{"WordText":"January","Left":194,"Top":1025,"Height":12,"Width":46},{"WordText":"2020","Left":243,"Top":1025,"Height":9,"Width":30},{"WordText":"after","Left":277,"Top":1024,"Height":10,"Width":27},{"WordText":"a","Left":308,"Top":1027,"Height":7,"Width":6},{"WordText":"14-year","Left":318,"Top":1025,"Height":12,"Width":45}],"MaxHeight":12,"MinTop":1024},{"LineText":"852,680","Words":[{"WordText":"852,680","Left":554,"Top":259,"Height":16,"Width":62}],"MaxHeight":16,"MinTop":259},{"LineText":"T- shaped symbol.","Words":[{"WordText":"T-","Left":564,"Top":460,"Height":10,"Width":14},{"WordText":"shaped","Left":580,"Top":459,"Height":14,"Width":50},{"WordText":"symbol.","Left":633,"Top":458,"Height":15,"Width":52}],"MaxHeight":15,"MinTop":458},{"LineText":"Additionally,","Words":[{"WordText":"Additionally,","Left":564,"Top":477,"Height":15,"Width":88}],"MaxHeight":15,"MinTop":477},{"LineText":"archaeologi«tl","Words":[{"WordText":"archaeologi«tl","Left":564,"Top":497,"Height":14,"Width":102}],"MaxHeight":14,"MinTop":497},{"LineText":"excavation sat Tiya have","Words":[{"WordText":"excavation","Left":564,"Top":515,"Height":12,"Width":75},{"WordText":"sat","Left":641,"Top":517,"Height":10,"Width":22},{"WordText":"Tiya","Left":666,"Top":514,"Height":16,"Width":31},{"WordText":"have","Left":700,"Top":515,"Height":12,"Width":32}],"MaxHeight":16,"MinTop":514},{"LineText":"yielded tombs. A s of","Words":[{"WordText":"yielded","Left":563,"Top":535,"Height":14,"Width":51},{"WordText":"tombs.","Left":616,"Top":535,"Height":11,"Width":50},{"WordText":"A","Left":670,"Top":536,"Height":10,"Width":10},{"WordText":"s","Left":682,"Top":538,"Height":8,"Width":6},{"WordText":"of","Left":691,"Top":535,"Height":14,"Width":16}],"MaxHeight":14,"MinTop":535},{"LineText":"1997, 118 stelae were","Words":[{"WordText":"1997,","Left":565,"Top":555,"Height":12,"Width":38},{"WordText":"118","Left":608,"Top":555,"Height":10,"Width":25},{"WordText":"stelae","Left":638,"Top":554,"Height":11,"Width":41},{"WordText":"were","Left":682,"Top":556,"Height":9,"Width":37}],"MaxHeight":12,"MinTop":554},{"LineText":"reportedin the area.","Words":[{"WordText":"reportedin","Left":564,"Top":572,"Height":15,"Width":78},{"WordText":"the","Left":646,"Top":573,"Height":11,"Width":23},{"WordText":"area.","Left":673,"Top":576,"Height":8,"Width":34}],"MaxHeight":15,"MinTop":572},{"LineText":"Along with the stelae in","Words":[{"WordText":"Along","Left":564,"Top":592,"Height":14,"Width":43},{"WordText":"with","Left":610,"Top":592,"Height":11,"Width":31},{"WordText":"the","Left":644,"Top":592,"Height":11,"Width":23},{"WordText":"stelae","Left":670,"Top":592,"Height":11,"Width":41},{"WordText":"in","Left":713,"Top":591,"Height":12,"Width":16}],"MaxHeight":14,"MinTop":591},{"LineText":"the Hadiya Zone, the","Words":[{"WordText":"the","Left":564,"Top":611,"Height":11,"Width":23},{"WordText":"Hadiya","Left":590,"Top":611,"Height":14,"Width":49},{"WordText":"Zone,","Left":644,"Top":612,"Height":12,"Width":38},{"WordText":"the","Left":685,"Top":611,"Height":11,"Width":23}],"MaxHeight":14,"MinTop":611},{"LineText":"structures are identified","Words":[{"WordText":"structures","Left":565,"Top":631,"Height":10,"Width":72},{"WordText":"are","Left":640,"Top":633,"Height":8,"Width":23},{"WordText":"identified","Left":666,"Top":629,"Height":12,"Width":72}],"MaxHeight":12,"MinTop":629},{"LineText":"bylocal residents as","Words":[{"WordText":"bylocal","Left":564,"Top":649,"Height":14,"Width":50},{"WordText":"residents","Left":619,"Top":649,"Height":11,"Width":65},{"WordText":"as","Left":688,"Top":652,"Height":8,"Width":16}],"MaxHeight":14,"MinTop":649},{"LineText":"Yegragn Dingay or","Words":[{"WordText":"Yegragn","Left":564,"Top":669,"Height":13,"Width":57},{"WordText":"Dingay","Left":625,"Top":667,"Height":15,"Width":49},{"WordText":"or","Left":676,"Top":671,"Height":8,"Width":16}],"MaxHeight":15,"MinTop":667},{"LineText":"'Gran'sstone\", in","Words":[{"WordText":"'Gran'sstone\",","Left":566,"Top":687,"Height":13,"Width":98},{"WordText":"in","Left":668,"Top":686,"Height":12,"Width":15}],"MaxHeight":13,"MinTop":686},{"LineText":"reference to Imam Ahmad","Words":[{"WordText":"reference","Left":564,"Top":706,"Height":14,"Width":59},{"WordText":"to","Left":625,"Top":707,"Height":10,"Width":14},{"WordText":"Imam","Left":643,"Top":707,"Height":10,"Width":41},{"WordText":"Ahmad","Left":687,"Top":706,"Height":11,"Width":49}],"MaxHeight":14,"MinTop":706},{"LineText":"ibn Ibrahim al-Ghazi","Words":[{"WordText":"ibn","Left":564,"Top":724,"Height":12,"Width":23},{"WordText":"Ibrahim","Left":590,"Top":724,"Height":12,"Width":61},{"WordText":"al-Ghazi","Left":655,"Top":724,"Height":12,"Width":59}],"MaxHeight":12,"MinTop":724},{"LineText":"(Ahmad \" Gurey\" or","Words":[{"WordText":"(Ahmad","Left":564,"Top":743,"Height":14,"Width":58},{"WordText":"\"","Left":626,"Top":744,"Height":5,"Width":5},{"WordText":"Gurey\"","Left":634,"Top":744,"Height":14,"Width":50},{"WordText":"or","Left":689,"Top":747,"Height":8,"Width":15}],"MaxHeight":14,"MinTop":743},{"LineText":"\"Gran\"), ruler ofthe Adal","Words":[{"WordText":"\"Gran\"),","Left":565,"Top":762,"Height":14,"Width":54},{"WordText":"ruler","Left":622,"Top":763,"Height":11,"Width":39},{"WordText":"ofthe","Left":664,"Top":763,"Height":14,"Width":39},{"WordText":"Adal","Left":706,"Top":762,"Height":12,"Width":32}],"MaxHeight":14,"MinTop":762},{"LineText":"Sultanate. Although","Words":[{"WordText":"Sultanate.","Left":564,"Top":782,"Height":11,"Width":71},{"WordText":"Although","Left":638,"Top":782,"Height":14,"Width":68}],"MaxHeight":14,"MinTop":782},{"LineText":"nominally p art ofthe","Words":[{"WordText":"nominally","Left":564,"Top":800,"Height":15,"Width":76},{"WordText":"p","Left":642,"Top":804,"Height":11,"Width":9},{"WordText":"art","Left":653,"Top":802,"Height":10,"Width":19},{"WordText":"ofthe","Left":675,"Top":801,"Height":14,"Width":38}],"MaxHeight":15,"MinTop":800},{"LineText":"Ottoman Empire since","Words":[{"WordText":"Ottoman","Left":565,"Top":821,"Height":10,"Width":60},{"WordText":"Empire","Left":628,"Top":819,"Height":15,"Width":48},{"WordText":"since","Left":678,"Top":819,"Height":12,"Width":39}],"MaxHeight":15,"MinTop":819},{"LineText":"1577, between 1821 and","Words":[{"WordText":"1577,","Left":565,"Top":840,"Height":12,"Width":38},{"WordText":"between","Left":607,"Top":839,"Height":11,"Width":64},{"WordText":"1821","Left":674,"Top":840,"Height":10,"Width":34},{"WordText":"and","Left":713,"Top":838,"Height":12,"Width":26}],"MaxHeight":12,"MinTop":838},{"LineText":"1841, Muhammad Ali,","Words":[{"WordText":"1841,","Left":564,"Top":859,"Height":12,"Width":35},{"WordText":"Muhammad","Left":604,"Top":858,"Height":11,"Width":85},{"WordText":"Ali,","Left":692,"Top":857,"Height":14,"Width":23}],"MaxHeight":14,"MinTop":857},{"LineText":"Pasha of Egypt, came to","Words":[{"WordText":"Pasha","Left":564,"Top":877,"Height":11,"Width":44},{"WordText":"of","Left":612,"Top":877,"Height":11,"Width":14},{"WordText":"Egypt,","Left":627,"Top":878,"Height":13,"Width":43},{"WordText":"came","Left":675,"Top":880,"Height":8,"Width":37},{"WordText":"to","Left":714,"Top":877,"Height":11,"Width":14}],"MaxHeight":13,"MinTop":877},{"LineText":"control Yemen, Harar,","Words":[{"WordText":"control","Left":564,"Top":896,"Height":11,"Width":46},{"WordText":"Yemen,","Left":612,"Top":897,"Height":12,"Width":52},{"WordText":"Harar,","Left":668,"Top":897,"Height":12,"Width":47}],"MaxHeight":12,"MinTop":896},{"LineText":"Gulf of Tadj oura with","Words":[{"WordText":"Gulf","Left":564,"Top":915,"Height":11,"Width":31},{"WordText":"of","Left":597,"Top":915,"Height":11,"Width":14},{"WordText":"Tadj","Left":613,"Top":914,"Height":15,"Width":31},{"WordText":"oura","Left":646,"Top":918,"Height":8,"Width":31},{"WordText":"with","Left":680,"Top":914,"Height":12,"Width":34}],"MaxHeight":15,"MinTop":914},{"LineText":"Zeilaand Berbera","Words":[{"WordText":"Zeilaand","Left":565,"Top":933,"Height":12,"Width":63},{"WordText":"Berbera","Left":633,"Top":934,"Height":11,"Width":56}],"MaxHeight":12,"MinTop":933},{"LineText":"included. The Governor","Words":[{"WordText":"included.","Left":565,"Top":952,"Height":12,"Width":64},{"WordText":"The","Left":633,"Top":953,"Height":11,"Width":28},{"WordText":"Governor","Left":665,"Top":954,"Height":10,"Width":66}],"MaxHeight":12,"MinTop":952},{"LineText":"AbouBaker ordered the","Words":[{"WordText":"AbouBaker","Left":564,"Top":972,"Height":11,"Width":83},{"WordText":"ordered","Left":649,"Top":972,"Height":11,"Width":57},{"WordText":"the","Left":708,"Top":972,"Height":11,"Width":23}],"MaxHeight":11,"MinTop":972},{"LineText":"Egyptian garrison at","Words":[{"WordText":"Egyptian","Left":565,"Top":989,"Height":16,"Width":61},{"WordText":"garrison","Left":630,"Top":990,"Height":15,"Width":60},{"WordText":"at","Left":693,"Top":992,"Height":10,"Width":14}],"MaxHeight":16,"MinTop":989}],"HasOverlay":true,"Message":"Total lines: 65"},"TextOrientation":"0","FileParseExitCode":1,"ParsedText":"female circumcision. The 2005\r\nDemographic and Health Survey reported\r\nthat 96% of women have gone through the\r\noperation. The agriculture sector at some\r\npoint employed approximately 75% ofthe\r\ncountry. The rice is cultivated in the\r\nflooded zones between streams and rivers.\r\nThe local production ofrice is not sufficient\r\nto feed the country, so rice is imported\r\nfrom Asia. The sector cultivates coffee beans,\r\npineapples,peaches, nectarines, mangoes,\r\noranges, bananas, potatoes, tomatoes,\r\ncucumbers, pepper, and other types of\r\nproduce. Gumea i s one ofthe emerging\r\nregional producers ofapples and pears.\r\nThere are plantations of grapes,\r\npomegranates, and more recent years have\r\nseen the development of strawberry\r\nplantations, based on the vertical\r\nhydroponic system. Guinea has 25% or\r\ninfluence in Tonga, financing\r\ninfrastructure pro]ects includinga\r\nnew royal palace, and holding two\r\nthirds of the countryS foreign\r\ndebt.Tonga retains cordial\r\nrelations with the united States.\r\nAlthough remains on good\r\nterms with the united Kingdom,\r\nthe two countries do not maintain\r\nparticularly close relations, and\r\nthe United Kingdom closed its\r\nHigh Commission in Tonga in\r\n2006, although the UK High\r\nCommission was re-established\r\nin January 2020 after a 14-year\r\n852,680\r\nT- shaped symbol.\r\nAdditionally,\r\narchaeologi«tl\r\nexcavation sat Tiya have\r\nyielded tombs. A s of\r\n1997, 118 stelae were\r\nreportedin the area.\r\nAlong with the stelae in\r\nthe Hadiya Zone, the\r\nstructures are identified\r\nbylocal residents as\r\nYegragn Dingay or\r\n'Gran'sstone\", in\r\nreference to Imam Ahmad\r\nibn Ibrahim al-Ghazi\r\n(Ahmad \" Gurey\" or\r\n\"Gran\"), ruler ofthe Adal\r\nSultanate. Although\r\nnominally p art ofthe\r\nOttoman Empire since\r\n1577, between 1821 and\r\n1841, Muhammad Ali,\r\nPasha of Egypt, came to\r\ncontrol Yemen, Harar,\r\nGulf of Tadj oura with\r\nZeilaand Berbera\r\nincluded. The Governor\r\nAbouBaker ordered the\r\nEgyptian garrison at\r\n","ErrorMessage":"","ErrorDetails":""}],"OCRExitCode":1,"IsErroredOnProcessing":false,"ProcessingTimeInMilliseconds":"734","SearchablePDFURL":"Searchable PDF not generated as it was not requested."}

function average(array, selector) {
    if (selector === undefined)
        return array.reduce((acc, val) => acc + val, 0) / array.length;
    else
        return array.reduce((acc, val) => acc + val[selector], 0) / array.length;
}

text = data.ParsedResults[0].ParsedText
overlayLines = data.ParsedResults[0].TextOverlay.Lines

// compute average top position of each line (the average for words on that line)
const tops = overlayLines.map(line => average(line.Words, 'Top'));

/* The API returns lines consecutively, from the top of each paragraph
   to its bottom. However, the API does not indicate any division 
   between paragraphs. We will discover the divisions using the following 
   greedy algorithm. 
   We will always merge to consecutive lines whose difference in y position is
   the lowest (or groups whose difference in average y position is the lowest). 
   If however the averages are too different, we stop merging and look at the 
   groups found so far.
*/

/* Each element has the structure (array w/ 4 elements):
        [0] increment in y compared to the previous item,
        [1] average increment in y within the group,
        the group spans the tops array from its [2] index,
        to its [3] index
   Diff of element 0 is unimportant. Elements (groups) 1..n "decide"
   whether to merge the immediately preceding group.
*/

let groups = tops.map((v, i) => ({
    jumpY: (i > 0) ? v - tops[i-1] : 0,  // jump for the first element is 0
    avgGroupJump: Number.POSITIVE_INFINITY,
    leftIdx: i,
    rightIdx: i
}));
    
const MAX_MERGE_PERCENTAGE = 0.4;

function groupsMinJump(groups) {
    // not so many items in groups, so we will do without implementing
    // the priority queue
    let minJump = Number.POSITIVE_INFINITY;
    let index = -1;
    for (let i = 1; i < groups.length; ++i) 
        if (groups[i].jumpY > 0 && groups[i].jumpY < minJump) {
            minJump = groups[i].jumpY;
            index = i;
        }
    return index;
}

while(true) {
    const i = groupsMinJump(groups);

    if (i == -1)
        break;  // cannot merge anymore (negative jumps only)

    const nowJump = groups[i].jumpY;
    const leftAvgJump = groups[i-1].avgGroupJump;
    const rightAvgJump = groups[i].avgGroupJump;

    const jumpOK = (avg) => {
        return avg == Number.POSITIVE_INFINITY || 
            (nowJump < avg * (1 + MAX_MERGE_PERCENTAGE) &&
             avg < nowJump * (1 + MAX_MERGE_PERCENTAGE))
    }
    
    if (!jumpOK(leftAvgJump) || !jumpOK(rightAvgJump))
        break;

    // no break occurred, so we can merge the two closest groups together    
    if (leftAvgJump== Number.POSITIVE_INFINITY &&
            rightAvgJump == Number.POSITIVE_INFINITY)
        groups[i-1].avgGroupJump = nowJump;
    else if (leftAvgJump== Number.POSITIVE_INFINITY)
        groups[i-1].avgGroupJump = rightAvgJump;
    else if (rightAvgJump==Number.POSITIVE_INFINITY)
        groups[i-1].avgGroupJump = leftAvgJump;
    else {
        const leftN = groups[i-1].rightIdx - groups[i-1].leftIdx + 1;
        const rightN = groups[i].rightIdx - groups[i].leftIdx + 1;
        groups[i-1].avgGroupJump = (leftAvgJump * leftN + rightAvgJump * rightN) /
                                   (leftN + rightN);
    }

    groups[i-1].rightIdx = groups[i].rightIdx; // extend the left group to the end
                                               //   of the right group

    groups.splice(i, 1) // remove the right group (which has been already merged
                        // into the left group) from groups
}

// now we will sort the array so that the single-line paragraph(s) come first,
//   then the paragraphs will be sorted according to their average Y position
//   (from the topmost to the bottommost)

function groupAverageY(group) {
    return average(tops.slice(group.leftIdx, group.rightIdx+1))
}

function groupText(group) {
    let resultText = '';
    for (let i = group.leftIdx; i <= group.rightIdx; ++i) {
        const sep = (resultText.length > 0) ? ' ' : '';
        resultText += sep + overlayLines[i].LineText;
    }
    return resultText;
}

for (let group of groups) {
    group.averageY = groupAverageY(group);  // append these infos to each element of
    group.text = groupText(group);          // the groups array
}

// sort groups according to Y positions
groups.sort((g1, g2) => g1.averageY - g2.averageY);

// filter groups with single / multiple lines
const singles = groups.filter(a => a.leftIdx == a.rightIdx);
const multis = groups.filter(a => a.rightIdx > a.leftIdx);

groups = [...singles, ...multis];  // merge the arrays together again

debugger;

// merge together


